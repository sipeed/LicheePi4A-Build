From 72f94f4ad45da91a33ae54040fdaa727c5359e7c Mon Sep 17 00:00:00 2001
From: Lu Hui <luhui@sipeed.com>
Date: Tue, 28 Nov 2023 11:04:01 +0800
Subject: [PATCH 48/53] revyos_defconfig: build some driver as module

---
 arch/riscv/configs/revyos_defconfig | 80 ++++++++++++++++-------------
 1 file changed, 44 insertions(+), 36 deletions(-)

diff --git a/arch/riscv/configs/revyos_defconfig b/arch/riscv/configs/revyos_defconfig
index 454a39ef0..fdfee8429 100644
--- a/arch/riscv/configs/revyos_defconfig
+++ b/arch/riscv/configs/revyos_defconfig
@@ -65,6 +65,8 @@ CONFIG_PACKET=y
 CONFIG_UNIX=y
 CONFIG_XFRM_USER=y
 CONFIG_INET=y
+CONFIG_IPV6=m
+CONFIG_IPV6_SIT=m
 CONFIG_NF_TABLES=m
 CONFIG_NF_TABLES_INET=y
 CONFIG_NF_TABLES_NETDEV=y
@@ -128,18 +130,19 @@ CONFIG_VSOCKETS=y
 CONFIG_VIRTIO_VSOCKETS=y
 CONFIG_NETLINK_DIAG=y
 CONFIG_CGROUP_NET_PRIO=y
-CONFIG_BT=y
-CONFIG_BT_RFCOMM=y
+CONFIG_BT=m
+CONFIG_BT_RFCOMM=m
 CONFIG_BT_RFCOMM_TTY=y
-CONFIG_BT_BNEP=y
-CONFIG_BT_HIDP=y
-CONFIG_BT_HCIUART=y
+CONFIG_BT_BNEP=m
+CONFIG_BT_HIDP=m
+CONFIG_BT_HCIUART=m
 CONFIG_BT_HCIUART_H4=y
 CONFIG_BT_HCIUART_RTL3WIRE=y
-CONFIG_CFG80211=y
-CONFIG_RFKILL=y
-CONFIG_NET_9P=y
-CONFIG_NET_9P_VIRTIO=y
+CONFIG_CFG80211=m
+CONFIG_MAC80211=m
+CONFIG_RFKILL=m
+CONFIG_NET_9P=m
+CONFIG_NET_9P_VIRTIO=m
 CONFIG_PCI=y
 CONFIG_DEVTMPFS=y
 CONFIG_DEVTMPFS_MOUNT=y
@@ -155,30 +158,35 @@ CONFIG_BLK_DEV_LOOP=y
 CONFIG_VIRTIO_BLK=y
 CONFIG_LIGHT_DSMART_CARD=y
 CONFIG_EEPROM_AT24=y
-CONFIG_SCSI=y
-CONFIG_BLK_DEV_SD=y
+CONFIG_SCSI=m
+CONFIG_BLK_DEV_SD=m
 CONFIG_MD=y
-CONFIG_BLK_DEV_DM=y
-CONFIG_DM_THIN_PROVISIONING=y
+CONFIG_BLK_DEV_DM=m
+CONFIG_DM_THIN_PROVISIONING=m
+CONFIG_DM_USER=m
 CONFIG_NETDEVICES=y
-CONFIG_DUMMY=y
-CONFIG_MACVLAN=y
-CONFIG_IPVLAN=y
-CONFIG_VXLAN=y
-CONFIG_TUN=y
-CONFIG_VETH=y
-CONFIG_VIRTIO_NET=y
+CONFIG_DUMMY=m
+CONFIG_WIREGUARD=m
+CONFIG_MACVLAN=m
+CONFIG_IPVLAN=m
+CONFIG_VXLAN=m
+CONFIG_TUN=m
+CONFIG_VETH=m
+CONFIG_VIRTIO_NET=m
 CONFIG_MACB=y
-CONFIG_STMMAC_ETH=y
+CONFIG_STMMAC_ETH=m
 CONFIG_STMMAC_RX_ZERO_COPY=y
 CONFIG_DWMAC_LIGHT=y
-CONFIG_MICROSEMI_PHY=y
-CONFIG_REALTEK_PHY=y
+CONFIG_STMMAC_PLATFORM=m
+CONFIG_DWMAC_GENERIC=m
+CONFIG_DWMAC_LIGHT=m
+CONFIG_MICROSEMI_PHY=m
+CONFIG_REALTEK_PHY=m
 CONFIG_USB_USBNET=m
 # CONFIG_USB_NET_AX8817X is not set
 # CONFIG_USB_NET_AX88179_178A is not set
 # CONFIG_USB_NET_NET1080 is not set
-CONFIG_RTL8723DS=y
+CONFIG_RTL8723DS=m
 CONFIG_AIC_WLAN_SUPPORT=y
 CONFIG_AIC_FW_PATH="/lib/firmware/aic8800"
 CONFIG_AIC8800_WLAN_SUPPORT=m
@@ -219,7 +227,7 @@ CONFIG_GPIO_DWAPB=y
 CONFIG_GPIO_PCA953X=y
 CONFIG_GPIO_PCA953X_IRQ=y
 CONFIG_POWER_SUPPLY=y
-CONFIG_BATTERY_CW2015=m
+CONFIG_BATTERY_CW2015=y
 CONFIG_CHARGER_GPIO=y
 CONFIG_SENSORS_MR75203=y
 CONFIG_SENSORS_PWM_FAN=y
@@ -295,18 +303,18 @@ CONFIG_FRAMEBUFFER_CONSOLE=y
 CONFIG_FRAMEBUFFER_CONSOLE_ROTATION=y
 CONFIG_LOGO=y
 CONFIG_DRM_I2C_LT8911EXB=y
-CONFIG_SOUND=y
-CONFIG_SND=y
+CONFIG_SOUND=m
+CONFIG_SND=m
 CONFIG_SND_USB_AUDIO=m
-CONFIG_SND_SOC=y
-CONFIG_SND_SOC_THEAD_LIGHT=y
-CONFIG_SND_SOC_AW87519=y
-CONFIG_SND_SOC_BT_SCO=y
-CONFIG_SND_SOC_ES7210=y
-CONFIG_SND_SOC_ES8156=y
-CONFIG_SND_SOC_WM8960=y
-CONFIG_SND_SIMPLE_CARD=y
-CONFIG_SND_AUDIO_GRAPH_CARD=y
+CONFIG_SND_SOC=m
+CONFIG_SND_SOC_THEAD_LIGHT=m
+CONFIG_SND_SOC_AW87519=m
+CONFIG_SND_SOC_BT_SCO=m
+CONFIG_SND_SOC_ES7210=m
+CONFIG_SND_SOC_ES8156=m
+CONFIG_SND_SOC_WM8960=m
+CONFIG_SND_SIMPLE_CARD=m
+CONFIG_SND_AUDIO_GRAPH_CARD=m
 CONFIG_UHID=y
 CONFIG_USB_HID=m
 CONFIG_HID_PID=y
-- 
2.34.1

