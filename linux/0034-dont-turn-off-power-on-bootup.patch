From 9bcb1079ce149ae09dd8bbdef6f1d67ec89d9b72 Mon Sep 17 00:00:00 2001
From: Lu Hui <luhui@sipeed.com>
Date: Fri, 17 Nov 2023 18:38:26 +0800
Subject: [PATCH 34/53] dont turn off power on bootup

---
 arch/riscv/boot/dts/thead/light-lpi4a-laptop.dts | 10 +++++++++-
 1 file changed, 9 insertions(+), 1 deletion(-)

diff --git a/arch/riscv/boot/dts/thead/light-lpi4a-laptop.dts b/arch/riscv/boot/dts/thead/light-lpi4a-laptop.dts
index 8fffedc51..5a2aeaf1e 100644
--- a/arch/riscv/boot/dts/thead/light-lpi4a-laptop.dts
+++ b/arch/riscv/boot/dts/thead/light-lpi4a-laptop.dts
@@ -16,6 +16,7 @@ reg_sys_vcc_5v: regulator-sys-vcc-5v-en {
 		regulator-max-microvolt = <5000000>;
 		gpio = <&pcal6408ahk_c 0 1>;
 		enable-active-high;
+		regulator-boot-on;
 		regulator-always-on;
 
 		regulator-state-mem {
@@ -34,6 +35,8 @@ reg_sys_vcc_3v3: regulator-sys-vcc-3v3-en {
 		regulator-min-microvolt = <3300000>;
 		regulator-max-microvolt = <3300000>;
 		enable-active-high;
+		regulator-boot-on;
+		regulator-always-on;
 	};
 
 	reg_sys_vcc_1v8: regulator-sys-vcc-1v8-en {
@@ -44,6 +47,8 @@ reg_sys_vcc_1v8: regulator-sys-vcc-1v8-en {
 		regulator-min-microvolt = <1800000>;
 		regulator-max-microvolt = <1800000>;
 		enable-active-high;
+		regulator-boot-on;
+		regulator-always-on;
 	};
 
 	reg_usb_vcc_5v: regulator-usb-vcc-5v-en {
@@ -55,6 +60,7 @@ reg_usb_vcc_5v: regulator-usb-vcc-5v-en {
 		vin-supply = <&reg_sys_vcc_5v>;
 		gpio = <&pcal6408ahk_d 3 1>;
 		enable-active-high;
+		regulator-boot-on;
 		regulator-always-on;
         };
 
@@ -64,9 +70,10 @@ reg_sata_vcc_5v: regulator-sata-vcc-5v-en {
 		regulator-name = "regulator-sata-vcc-5v-en";
 		regulator-min-microvolt = <5000000>;
 		regulator-max-microvolt = <5000000>;
-		vin-supply = <&reg_usb_vcc_5v>;
+		vin-supply = <&reg_sys_vcc_5v>;
 		gpio = <&pcal6408ahk_c 1 1>;
 		enable-active-high;
+		regulator-boot-on;
 		regulator-always-on;
 	};
 
@@ -77,6 +84,7 @@ audio_amp: regulator-audio-amp-en {
                 vin-supply = <&reg_sys_vcc_5v>;
 		gpio = <&pcal6408ahk_c 3 1>;
 		enable-active-high;
+		regulator-boot-on;
 		regulator-always-on;
 	};
 
-- 
2.34.1

