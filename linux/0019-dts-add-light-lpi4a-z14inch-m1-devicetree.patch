From f5e3fa219d8bf1b105e1b457a13f4980daf8b4a4 Mon Sep 17 00:00:00 2001
From: Lu Hui <luhui@sipeed.com>
Date: Mon, 11 Dec 2023 12:46:22 +0800
Subject: [PATCH 19/53] dts: add light-lpi4a-z14inch-m1 devicetree

---
 arch/riscv/boot/dts/thead/Makefile            |  1 +
 .../boot/dts/thead/light-lpi4a-laptop.dts     |  2 +-
 .../boot/dts/thead/light-lpi4a-z14inch-m1.dts | 43 +++++++++++++++++++
 3 files changed, 45 insertions(+), 1 deletion(-)
 create mode 100644 arch/riscv/boot/dts/thead/light-lpi4a-z14inch-m1.dts

diff --git a/arch/riscv/boot/dts/thead/Makefile b/arch/riscv/boot/dts/thead/Makefile
index 3d6916ec6..4db93df34 100644
--- a/arch/riscv/boot/dts/thead/Makefile
+++ b/arch/riscv/boot/dts/thead/Makefile
@@ -48,6 +48,7 @@ dtb-$(CONFIG_SOC_THEAD) += fire-emu-soc-base.dtb fire-emu-soc-c910x4.dtb fire-em
 dtb-$(CONFIG_SOC_THEAD) += fire-emu-soc-base-sec.dtb
 dtb-$(CONFIG_SOC_THEAD) += light-lpi4a-laptop.dtb
 dtb-$(CONFIG_SOC_THEAD) += light-lpi4a-console.dtb
+dtb-$(CONFIG_SOC_THEAD) += light-lpi4a-z14inch-m1.dtb
 dtb-$(CONFIG_SOC_THEAD) += light-milkv-meles.dtb light-milkv-meles-4g.dtb
 
 targets += dtbs dtbs_install
diff --git a/arch/riscv/boot/dts/thead/light-lpi4a-laptop.dts b/arch/riscv/boot/dts/thead/light-lpi4a-laptop.dts
index d6a4a0844..d2c4b62b6 100644
--- a/arch/riscv/boot/dts/thead/light-lpi4a-laptop.dts
+++ b/arch/riscv/boot/dts/thead/light-lpi4a-laptop.dts
@@ -150,7 +150,7 @@ touch@14 {
 		status = "okay";
 	};
 
-	lt8911@29 {
+	lt8911: lt8911@29 {
 		compatible = "lontium,lt8911exb";
 		reg = <0x29>;
 		lontium,pclk = <136000000>;
diff --git a/arch/riscv/boot/dts/thead/light-lpi4a-z14inch-m1.dts b/arch/riscv/boot/dts/thead/light-lpi4a-z14inch-m1.dts
new file mode 100644
index 000000000..05a0b2be0
--- /dev/null
+++ b/arch/riscv/boot/dts/thead/light-lpi4a-z14inch-m1.dts
@@ -0,0 +1,43 @@
+/* SPDX-License-Identifier: GPL-2.0 */
+/*
+ * Copyright (C) 2023 Sipeed.
+ */
+
+#include "light-lpi4a-laptop.dts"
+
+/ {
+        model = "T-HEAD Light Lichee Pi 4A configuration for Z14INCH-M1";
+};
+
+&dsi0_panel0 {
+	compatible = "custom,z14inch_1920x1200_54Hz";
+};
+
+&cw2015 {
+	cellwise,battery-profile = /bits/ 8 <
+		0x17 0x67 0x72 0x68 0x66 0x63 0x62 0x5A
+		0x64 0x61 0x4D 0x57 0x5A 0x51 0x43 0x38
+		0x31 0x2A 0x24 0x22 0x29 0x31 0x3E 0x4C
+		0x29 0x4D 0x0B 0x85 0x1C 0x38 0x47 0x57
+		0x5D 0x5E 0x5F 0x60 0x3F 0x1A 0x6F 0x41
+		0x0A 0x43 0x12 0x38 0x7B 0x95 0x9A 0x18
+		0x4B 0x6F 0x9E 0xD5 0x80 0x57 0x87 0xCB
+		0x2F 0x00 0x64 0xA5 0xB5 0x13 0x54 0xB9
+	>;
+};
+
+&lt8911 {
+	lontium,pclk = <138250000>;
+	lontium,hact = <1920>;
+	lontium,vact = <1200>;
+	lontium,hbp = <80>;
+	lontium,hfp = <48>;
+	lontium,vbp = <22>;
+	lontium,vfp = <3>;
+	lontium,hs = <32>;
+	lontium,vs = <6>;
+	lontium,mipi_lane = <0x02>;
+	lontium,lane_cnt = <0x02>;
+	lontium,color = <0x01>;
+	lontium,test = <0>;
+};
-- 
2.34.1

